<!-- gmaps -->
<div class="container">
  <a name="map-anchor"></a>
  <div id="buildings-map" style='width: 100%; height: 450px;'></div>
</div>
<!-- end of gmaps -->

<div class="container chapter-container">
  <!-- about this site -->
  <div class="chapter-head">
    <h3><%= @buildings.count %> Gebäude</h3>
  </div>
  <!--//about this site---->
</div>

<div class="container chapter-container">
  <div class="section-container">
    <div class="section-header">
      <p>Klick auf den Gebäudenamen, um es auf der Karte anzuzeigen.</p>
    </div>
    <!-- building list -->
    <div class="section-text">
      <div id="buildings-grid">
      </div>
    </div>
    <!-- building list color coding legend -->
    <div class="section-text">
      <div class="col-xs-12 col-sm-4 col-md-3 col-md-offset-1 col-lg-offset-2">
        <span class="glyphicon glyphicon-stop" style="color: #F16745; font-size: xx-large; top: 8px;right: 3px;"></span> Tour: <%= link_to @tours.first.name, tour_path(@tours.first.id) %>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-3">
        <span class="glyphicon glyphicon-stop" style="color: #8dcd91; font-size: xx-large; top: 8px;right: 3px;"></span> Tour: <%= link_to @tours.second.name, tour_path(@tours.second.id) %>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-3">
        <span class="glyphicon glyphicon-stop" style="color: #3e8fae; font-size: xx-large; top: 8px;right: 3px;"></span> Tour: <%= link_to @tours.third.name, tour_path(@tours.third.id) %>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
  buildingsMap( <%= raw @hash.to_json %> );
  buildBuildingsList( <%= raw @hash.to_json %> );

  $(document).on('turbolinks:load',function(){
    bindGridItemsToMarker();
  });

  $(window).resize(_.debounce(function(){
    bindGridItemsToMarker();
  },500));

</script>
