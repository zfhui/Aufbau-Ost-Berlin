<!-- gmaps -->
<div class="container">
  <a name="map-anchor"></a>
  <div id="buildings-map" style='width: 100%; height: 450px;'></div>
</div>
<!-- end of gmaps -->

<div class="container chapter-container">
  <!-- about this site -->
  <div class="chapter-head">
    <h3><%= @buildings.count %> Gebäude</h3>
  </div>
  <div class="chapter-text">
    <p>Der Menüpunkt “Gebäude” bietet einen Überblick zu den von uns aus dem Datensatz ausgewählten 27 Objekten. Wir haben uns bemüht, die architektonischen Besonderheiten jedes Objekts herauszustellen, aber auch - falls vorhanden - Informationen zur städtebaulichen Bedeutung, zu direkten Gegenentwürfen oder Vorläufern bereitzustellen. Jedem Gebäude sind meist mehrere Fotos zugeordnet, die andere Perspektiven ermöglichen. Doppelungen haben wir versucht zu vermeiden. Wo vorhanden, sind jeweils die zugehörigen Links zu Wikipedia und Wikimedia Commons sowie teilweise anderer Webseiten angegeben. Besonders freut es uns, wenn wir einen passenden Videobeitrag finden konnten. Die Qualität ist dabei sehr unterschiedlich; dass es aber überhaupt solche Zeitdokumente gibt, ist schon großartig! Hinweise zu weiteren Video- oder Textbeiträgen zum Objekt, Architekt oder städtebaulichen Kontext nehmen wir daher dankend entgegen.</p>
  </div>
  <!--//about this site---->

  <div class="section-container">
    <div class="section-header">
      <p>Klick auf den Gebäudenamen, um es auf der Karte anzuzeigen.</p>
    </div>
    <!-- building list -->
    <div class="section-text">
      <div id="buildings-grid">
      </div>
    </div>
    <!-- building list color coding legend -->
    <div class="section-text">
      <div class="col-xs-12 col-sm-4 col-md-3 col-md-offset-1 col-lg-offset-2">
        <span class="glyphicon glyphicon-stop" style="color: #F16745; font-size: xx-large; top: 8px;right: 3px;"></span> Tour: <%= link_to @tours.first.name, tour_path(@tours.first) %>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-3">
        <span class="glyphicon glyphicon-stop" style="color: #3e8fae; font-size: xx-large; top: 8px;right: 3px;"></span> Tour: <%= link_to @tours.second.name, tour_path(@tours.second) %>
      </div>
      <div class="col-xs-12 col-sm-4 col-md-3">
        <span class="glyphicon glyphicon-stop" style="color: #8dcd91; font-size: xx-large; top: 8px;right: 3px;"></span> Tour: <%= link_to @tours.third.name, tour_path(@tours.third) %>
      </div>
    </div>
  </div>
</div>

<% if current_user %>
  <div class="container importer-container">
    <p><%= link_to 'Neues Gebäude', new_building_path %></p>
    <p>Import Buildings</p>
    <p>
      <%= form_tag import_buildings_path, multipart: true do %>
        <%= file_field_tag :file %>
        <%= submit_tag 'Import'%>
      <% end %>
    </p>
</div>
<% end %>

<script type="text/javascript">
  buildingsMap( <%= raw @hash.to_json %> );
  buildBuildingsList( <%= raw @hash.to_json %> );

  $(window).load(function(){
    bindGridItemsToMarker();
  });

  $(window).resize(_.debounce(function(){
    bindGridItemsToMarker();
  },500));

</script>
